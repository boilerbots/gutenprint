<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Daniele Berti's Ghostscript with STP driver support </title>
<base target="_self">
</head>

<body>

<p align="center"><font face="Arial" size="6" color="#CD4118">Daniele Berti's Ghostscript
with STP driver support</font></p>

<p align="center"><font face="Arial" size="4" color="#8D54CD">Latest update: 28.05.2001</font></p>

<p align="center" style="COLOR: red">
<img src="http://web.tin.it/servizi/web_cgi/wcounter/Count.cgi?userid=livbe|df=stp.dat" 
align="absMiddle">&nbsp;hits since 23.11.2000</P>

<p align="center"><b><font face="Arial" color="#8D54CD" size="5">README</font></b></p>

<p align="left"><b><font face="Arial" color="#8D54CD" size="3"><a href="#CREDITS">Credits</a><br>
<a href="#CAVEATS">Caveats</a><br>
<a href="#PRECOMPILED RPMs">Precompiled RPMs</a><br>
<a href="#SOURCE RPMs">Source RPMs</a><br>
<a href="#INSTALLING AND SETTING UP">Installing and setting up</a><br>
<a href="#HELP">Help</a></font></b></p>

<p align="left"><font face="Arial" color="#8D54CD" size="3"><b><br>
</b></font></p>

<p align="left"><font face="Arial" size="3" color="#8D54CD"><b><a name="CREDITS">CREDITS</a><br>
</b></font>Many thanks to the teams of&nbsp; <a href="http://sourceforge.net/projects/gimp-print/" target="_blank">GIMP-PRINT</a>
project and of&nbsp; <a href="http:/www.linuxprinting.org" target="_blank">LINUXPRINTING</a>
from which I took documentation and sources that made it possible to me to realize this really small
contribute to Linux community.<br>
Last&nbsp; but not least, I would like to thank all people at <a href="http://www.cs.wisc.edu/~ghost/doc/gnu/index.htm" target="_blank">GNU
GHOSTSCRIPT</a> project.</p>
<p><font face="Arial" size="3" color="#8D54CD"><b><a name="CAVEATS">CAVEATS</a><br>
</b></font>BEFORE downloading be aware that some skill is necessary to know what you're
doing over your Linux box with the below mentioned RPMs packages.</p>
<p>THEN: this packages are meant to be used with <span style="background-color: #FF0000">RedHat</span>
distribution.<br>
I've been reported a successful compile under <u>LinuxPPC 2000</u> (starting of
course from <a href="#SOURCE RPMs">sources</a>), yet this distribution is RH
based ;-)</p>
<p><span style="background-color: #FFFF00">Particularly, knowing printing
mechanism under Linux is mandatory: so read your PRINTING howto first.</span></p>
<p><span style="background-color: #FFFF00">For USB printers</span> you may want
to check <a href="http://www.linuxnewbie.org/nhf/intel/hardware/usbprinter.html" target="_blank">this</a>
site.<br>
IMHO USB support under Linux is not yet stable anyway......&nbsp; ;-)</p>
<p><span style="background-color: #FFFF00">ALSO some of your printer's
capabilities may not (yet) be supported by STP driver: you are encouraged to
check it yourself <a href="http:/www.linuxprinting.org" target="_blank">here</a>
before proceding.</span></p>
<p>I'd like to point your attention to the fact that actual &quot;conflicts&quot; with
RH6.2-7.x &lt;ghostscript&gt; package will arise (if the RH
flavoured package
is installed).This is because -of
course- &quot;my&quot; gs executable is different with the one installed by the
original RPM.</p>
<p>In addition to this, RH6.2-7.x &lt;ghostscript-fonts&gt; is something different
from the here provided package: even if they've same package (not file) name,
the contents and the path are respectively complementary and different.So I was
pushed to add &lt;/usr/share/fonts/default/ghostscript&gt; PATH support into GS
executable so that both fonts packages contents are used.</p>
<p><span style="background-color: #FF0000">Be sure that you're using the latest
packages (except ghostscript and ghostscript-fonts) for your RH version: i.e. pick up the <u>updates</u> from one of <a href="http://www.redhat.com/download/mirror.html" target="_blank">these</a>
 mirrors.
</span></p>
<p><span style="background-color: #FF0000">If you don't find any update for
these packages, it means that the latest are still the ones shipped with your RH
CD(s).<br>
</span></p>
<p><font face="Arial" size="3" color="#8D54CD"><b><a name="PRECOMPILED RPMs">PRECOMPILED
RPMs</a><br>
</b></font> <a href="../../download/linux/stp/ghostscript-5.50-23.4.05.i386.rpm">ghostscript-5.50-23.4.05.i386.rpm</a>
 (1813Kb, 28.05.2001, gnu-gs 5.50a, Gimp-Print 4.04, glibc 2.1.3-22, rpm 4.02)</p>
<p><a href="../../download/linux/stp/ghostscript-fonts-5.50-23.4.05.noarch.rpm">ghostscript-fonts-5.50-23.4.05.noarch.rpm</a>
(1873Kb, 28.05.2001, gnu-gs 5.50a, Gimp-Print 4.04, glibc 2.1.3-22, rpm 4.02)</p>
<p>&nbsp;</p>
<p><font face="Arial" size="3" color="#8D54CD"><b><a name="SOURCE RPMs">SOURCE
RPMs</a></b></font><br>
If you like to compile the packages yourself, here are the SOURCE&nbsp; RPMs.</p>
<p>You are likely to need at a bare minimum the following packages to do a
successful compile:<br>
rpm<br>
rpm-devel<br>
rpm-build<br>
sharutils<br>
zlib-devel<br>
svgalib<br>
svgalib-devel<br>
libpng<br>
libpng-devel<br>
glibc<br>
glibc-devel<br>
XFree86-devel
</p>
<p><span style="background-color: #FF0000">Be sure that you're using the latest
packages (except ghostscript and ghostscript-fonts) for your RH version: i.e. pick up the <u>updates</u> from one of <a href="http://www.redhat.com/download/mirror.html" target="_blank">these</a>
 mirrors.
</span></p>
<p><span style="background-color: #FF0000">If you don't find any update for
these packages, it means that the latest are still the ones shipped with your RH
CD(s).</span></p>
<p>&nbsp;</p>
<p><font color="#FF0000"><span style="background-color: #FFFF00">NOTE for RH 7.x
users: you are strongly encouraged to make your own RPMs starting from these
sources, to bypass eventual libs (and any other possible source of) backwards
incompability !!</span></font></p>
<p><a href="../../download/linux/stp/ghostscript-5.50-23.4.05.src.rpm">ghostscript-5.50-23.4.05.src.rpm</a>
 (4234Kb, 28.05.2001, gnu-gs 5.50a, Gimp-Print 4.05, rpm 4.02)</p>
<p><a href="../../download/linux/stp/ghostscript-fonts-5.50-23.4.05.src.rpm">ghostscript-fonts-5.50-23.4.05.src.rpm</a>
 (1836Kb, 28.05.2001, gnu-gs 5.50a, Gimp-Print 4.05, rpm 4.02)</p>
<p>&nbsp;</p>
<p><font face="Arial" size="3" color="#8D54CD"><b><a name="INSTALLING AND SETTING UP">INSTALLING
AND SETTING UP</a><br>
</b></font>Installing compiled RPM packages:&nbsp;</p>
<p>rpm -Uvh --force ghostscript-5.50-23.4.05.i386.rpm</p>
<p>rpm -Uvh --force ghostscript-fonts-5.50-23.4.05.noarch.rpm</p>
<p>&nbsp;</p>
<p>Installing source RPM packages:&nbsp;</p>
<p>rpm -Uvh --force ghostscript-5.50-23.4.05.src.rpm</p>
<p>rpm -Uvh --force ghostscript-fonts-5.50-23.4.05.src.rpm</p>
<p>To rebuild RPM packages from installed SRC packages cd to &lt;/usr/src/redhat/SPECS&gt;
and do &lt;rpm -ba <i>specfilename&gt;</i> for each spec file. Tipically you'll find
compiled RPM packages into /usr/src/redhat/RPMS/.... path.<br>
<span style="background-color: #FFFF00">Important!!</span>: in some cases en
error will occur which leads to <span style="background-color: #FFFF00">failure
in compiling</span> ghostscript with a message like...&quot;/usr/bin/ld didn't
find -lXt&quot;.<br>
This is due to the fact that default makefile &lt;<a href="unix-gcc.mak" target="_blank">unic-gcc.mak</a>&gt;
as provided with ghostscript source rpm, looks for X libraries into &lt;/usr/X11/lib&gt;
path.<br>
In a PC of a customer of mine the path was &lt;/usr/X11R6/lib&gt;....and I kept
on having error messages.<br>
<span style="background-color: #FFFF00">Solution</span>: copy and decompress
&lt;tar -xzvf gnu-gs-5.50.tar.gz&gt; file (&lt;/usr/src/redhat/SOURCES/gnu-gs-5.50.tar.gz&gt;)
into a brand new dir, lets say &lt;/tmp/1&gt; then remove the tar.gz file itself.Open
for editing unix-gcc file into gs5.50 dir and look for XLIBDIRS=-L/usr/X11/lib .Change
the path accordingly to your system. Then &lt;cd ..&gt;.Recompress all the stuff
&lt;tar -zcvf gnu-gs-5.50.tar.gz *&gt;.Copy the tarball file to &lt;/usr/src/redhat/SOURCES/gnu-gs-5.50.tar.gz&gt;
thus overwriting original file with same name. Compile as above said. For &quot;lazy&quot;
guys out there and <span style="background-color: #FFFF00">only for &lt;/usr/X11R6/lib&gt;
path flavour</span>, &lt;ln -s /usr/X11R6 /usr/X11&gt; (Thanks to <a href="mailto:thomas.orlowski@gmx.net">Thomas
Orlowsky</a> ).
</p>
<p>&nbsp;
</p>
<p><font color="#FF0000">How to check that ghostscript has stp support?<br>
</font>gs -h | grep stp<br>
If the output contains stp it's all ok.</p>
<p>&nbsp;</p>
<p>After having installed the packages and checked as above, you've to add following lines to your
&lt;printerdb&gt; file (as provided by package &lt;rhs-printfilters>) in order to make &lt;printtool> know that you've got STP driver
support :</p>
<p>StartEntry: STP driver<br>
&nbsp;&nbsp;&nbsp; GSDriver: stp&nbsp;<br>
&nbsp;&nbsp;&nbsp; Description: {STP driver}<br>
&nbsp;&nbsp;&nbsp; About: { \<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
STP driver.\<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
&nbsp;&nbsp;&nbsp; Resolution: {360} {360} {}<br>
EndEntry</p>
<p>&nbsp;</p>
<p>Fire up X then printtool and add a new printer, pointing to the STP driver entry,
give it the desidered name of your printer (in my case 700stp, for my Epson Photo 700).Note
that this is only a reference name.</p>
<p>Into the EXTRA GS options field you've to type the options from what follows <a href="README">here</a>
at the voice &quot;OPTIONS:&quot;.</p>
<p>Finally, it's a good idea to add PRINTER environment variable (in my case,
matching the above mentioned reference name, PRINTER=&quot;700stp&quot;), otherwise in some cases you'll have to add into the print
command the -P <i> printername</i> switch to see things work .Of course the line
containing export..... must contain also PRINTER .Due to the overhelming number
of people that are E-Mailing me asking HOW to do this, I'll tell you that you
must check/insert these clauses -either PRINTER=&quot;700stp&quot; variable
definition or PRINTER statement (the later to the line beginning with export
word )- into each file named &lt;<a href="bash_profile" target="_blank">.bash_profile</a>&gt; .Where is such a file?Into
every user's home dir.</p>
<p>Once added the printer to your environment, re-login and check the work done.</p>
<p><font color="#FF0000">How to check if the printer has been actually added to
environment?<br>
</font>export | grep PRINTER<br>
If the output contains your printer's name (ie. 700stp), printer has been
added to environment.</p>
<p>Start X if not already running, start printtool, select your printer,
print tests...you should be done :-)</p>
<p>&nbsp;</p>
<p><font face="Arial" size="3" color="#8D54CD"><b><a name="HELP">HELP</a><br>
</b></font>Feel free to contact me <a href="mailto:daberti@tin.it">here</a> providing
any helpy info (i.e.: tell me first what checks have been done and their results,
attach &lt;printerdb&gt; file along with ALL of the files located into your
spooling dir).</p>
<p>Many people asked me to provide help about supported page sizes: just
hit&nbsp;</p>
<p>man gs</p>
<p>Of course the -sPAPERSIZE=<i>a_known_paper_size</i> switch must be added to
EXTRA GS options ;-)</p>
<p>----------------</p>
<p>Cheers from Italy</p>
<p>Daniele Berti</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

</body>

</html>
